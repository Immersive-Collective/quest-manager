<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Connector</title>
</head>
<body>
    <h1>Connected Android Devices</h1>
    <div id="devices-list"></div>

    <script>
        // This script requests the device list from the server and displays it.
        async function fetchDevices() {
            try {
                let response = await fetch('/devices');
                let devices = await response.json();
                let container = document.getElementById('devices-list');
                
                // Clear the current list
                container.innerHTML = '';

                // Add all devices to the page
                devices.forEach((device) => {
                    let deviceElem = document.createElement('div');
                    deviceElem.textContent = `Device ID: ${device.id}`;
                    container.appendChild(deviceElem);
                });

                // Re-fetch every 5 seconds
                setTimeout(fetchDevices, 5000);
            } catch (error) {
                console.error('Error fetching devices:', error);
            }
        }

        // Initial fetch
        fetchDevices();
    </script>
</body>
</html>
